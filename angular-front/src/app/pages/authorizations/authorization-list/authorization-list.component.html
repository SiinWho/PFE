<app-page-breadcrumb pageTitle="Autorisations et Ordres de Mission" />

<div class="mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
  <div class="flex items-center gap-3">
    <app-button [routerLink]="['/authorizations/new']" size="sm">
      Nouvelle Demande
    </app-button>
  </div>
</div>

<app-component-card title="Liste des Demandes">
  <div class="max-w-full overflow-x-auto">
    <table class="w-full text-left border-collapse">
      <thead>
        <tr class="border-b border-gray-100 dark:border-gray-800">
          <th class="px-5 py-4 text-sm font-medium text-gray-500 uppercase tracking-wider">Employé</th>
          <th class="px-5 py-4 text-sm font-medium text-gray-500 uppercase tracking-wider">Type</th>
          <th class="px-5 py-4 text-sm font-medium text-gray-500 uppercase tracking-wider">Date</th>
          <th class="px-5 py-4 text-sm font-medium text-gray-500 uppercase tracking-wider">Détails</th>
          <th class="px-5 py-4 text-sm font-medium text-gray-500 uppercase tracking-wider">Motif</th>
          <th class="px-5 py-4 text-sm font-medium text-gray-500 uppercase tracking-wider">Statut</th>
          <th class="px-5 py-4 text-sm font-medium text-gray-500 uppercase tracking-wider">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let auth of authorizations" class="border-b border-gray-100 dark:border-gray-800 last:border-0 hover:bg-gray-50 dark:hover:bg-white/[0.02] transition-colors">
          <td class="px-5 py-4">
            <div class="text-sm font-medium text-gray-800 dark:text-white/90">{{ auth.employee }}</div>
            <div class="text-xs text-gray-500">{{ auth.submittedAt | date:'short' }}</div>
          </td>
          <td class="px-5 py-4">
            <app-badge [color]="getTypeColor(auth.type)" size="sm">
              {{ auth.type }}
            </app-badge>
          </td>
          <td class="px-5 py-4 text-sm text-gray-600 dark:text-gray-400">
            {{ auth.date | date:'mediumDate' }}
          </td>
          <td class="px-5 py-4 text-sm text-gray-600 dark:text-gray-400">
            <span *ngIf="auth.duration">{{ auth.duration }}</span>
            <span *ngIf="auth.destination">{{ auth.destination }}</span>
          </td>
          <td class="px-5 py-4 text-sm text-gray-600 dark:text-gray-400 max-w-xs truncate">
            {{ auth.reason }}
          </td>
          <td class="px-5 py-4">
            <app-badge [color]="getStatusColor(auth.status)">
              {{ auth.status }}
            </app-badge>
          </td>
          <td class="px-5 py-4 text-sm">
            <div class="flex items-center gap-3">
              <button [routerLink]="['/authorizations', auth.id]" class="text-gray-500 hover:text-primary-500 transition-colors">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M9 3C5.25 3 2.04 5.48 1 9C2.04 12.52 5.25 15 9 15C12.75 15 15.96 12.52 17 9C15.96 5.48 12.75 3 9 3ZM9 13C6.79 13 5 11.21 5 9C5 6.79 6.79 5 9 5C11.21 5 13 6.79 13 9C13 11.21 11.21 13 9 13ZM9 6.5C7.62 6.5 6.5 7.62 6.5 9C6.5 10.38 7.62 11.5 9 11.5C10.38 11.5 11.5 10.38 11.5 9C11.5 7.62 10.38 6.5 9 6.5Z" fill="currentColor"/>
                </svg>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</app-component-card>
